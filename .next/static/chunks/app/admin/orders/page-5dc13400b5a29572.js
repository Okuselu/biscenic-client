(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{1007:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1454:(e,t,s)=>{Promise.resolve().then(s.bind(s,6791))},3580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>h});var a=s(2115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=l(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function h(){let[e,t]=a.useState(o);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(2596),r=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},4560:(e,t,s)=>{"use strict";s.d(t,{$:()=>l,s:()=>n});var a=s(7165),r=s(7948),i=s(6784),n=class extends r.k{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||l(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#a({type:"continue"})};this.#s=(0,i.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#a({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#a({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let s="pending"===this.state.status,a=!this.#s.canStart();try{if(s)t();else{this.#a({type:"pending",variables:e,isPaused:a}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#a({type:"pending",context:t,variables:e,isPaused:a})}let r=await this.#s.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#a({type:"success",data:r}),r}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#a({type:"error",error:t})}}finally{this.#t.runNext(this)}}#a(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),a.jG.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function l(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},4957:(e,t,s)=>{"use strict";s.d(t,{u:()=>a});let a=s(3464).A.create({baseURL:"https://biscenic-server-4.onrender.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("adminToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("adminToken"),localStorage.removeItem("adminLoggedIn"),window.location.pathname.startsWith("/admin")&&(window.location.href="/secure-admin")),Promise.reject(e)})},5041:(e,t,s)=>{"use strict";s.d(t,{n:()=>c});var a=s(2115),r=s(4560),i=s(7165),n=s(5910),l=s(2020),d=class extends n.Q{#r;#i=void 0;#n;#l;constructor(e,t){super(),this.#r=e,this.setOptions(t),this.bindMethods(),this.#d()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#r.defaultMutationOptions(e),(0,l.f8)(this.options,t)||this.#r.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.EN)(t.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#d(),this.#o(e)}getCurrentResult(){return this.#i}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#d(),this.#o()}mutate(e,t){return this.#l=t,this.#n?.removeObserver(this),this.#n=this.#r.getMutationCache().build(this.#r,this.options),this.#n.addObserver(this),this.#n.execute(e)}#d(){let e=this.#n?.state??(0,r.$)();this.#i={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#o(e){i.jG.batch(()=>{if(this.#l&&this.hasListeners()){let t=this.#i.variables,s=this.#i.context;e?.type==="success"?(this.#l.onSuccess?.(e.data,t,s),this.#l.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#l.onError?.(e.error,t,s),this.#l.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#i)})})}},o=s(6715);function c(e,t){let s=(0,o.jE)(t),[r]=a.useState(()=>new d(s,e));a.useEffect(()=>{r.setOptions(e)},[r,e]);let n=a.useSyncExternalStore(a.useCallback(e=>r.subscribe(i.jG.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=a.useCallback((e,t)=>{r.mutate(e,t).catch(l.lQ)},[r]);if(n.error&&(0,l.GU)(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:c,mutateAsync:n.mutate}}},5784:(e,t,s)=>{"use strict";s.d(t,{bq:()=>h,eb:()=>f,gC:()=>x,l6:()=>c,yv:()=>u});var a=s(5155),r=s(2115),i=s(8793),n=s(6474),l=s(7863),d=s(5196),o=s(3999);let c=i.bL;i.YJ;let u=i.WT,h=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(i.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=i.l9.displayName;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});m.displayName=i.PP.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=i.wn.displayName;let x=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...l}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...l,children:[(0,a.jsx)(m,{}),(0,a.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(p,{})]})})});x.displayName=i.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=i.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(i.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:r})]})});f.displayName=i.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=i.wv.displayName},6791:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var a=s(5155),r=s(2115),i=s(6766),n=s(8482),l=s(7168),d=s(3999);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,d.cn)("w-full caption-bottom text-sm",s),...r})})});o.displayName="Table";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,d.cn)("[&_tr]:border-b",s),...r})});c.displayName="TableHeader";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,d.cn)("[&_tr:last-child]:border-0",s),...r})});u.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});h.displayName="TableRow";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});m.displayName="TableHead";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});p.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";var x=s(9840),f=s(5784);let g=(0,s(2085).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function y(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,d.cn)(g({variant:s}),t),...r})}var v=s(9946);let b=(0,v.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var j=s(2657);let N=(0,v.A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var w=s(7108);let C=(0,v.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var O=s(1007);let R=(0,v.A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var S=s(3580),k=s(2960),A=s(6715),T=s(5041),M=s(4957),E=s(7361);let I={getAllOrders:async()=>{let e=await M.u.get(E.R.orders.list);return e.data.data||e.data||[]},getOrderById:async e=>(await M.u.get(E.R.orders.detail(e))).data.data,getUserOrders:async e=>(await M.u.get(E.R.orders.userOrders(e))).data.data,createOrder:async e=>(await M.u.post(E.R.orders.create,e)).data.data,updateOrder:async(e,t)=>(await M.u.patch(E.R.orders.update(e),t)).data.data,updateOrderStatus:async e=>(await M.u.put(E.R.orders.updateStatus,e)).data.data,deleteOrder:async e=>{await M.u.delete(E.R.orders.delete(e))},getOrderStats:async()=>{let e=await I.getAllOrders(),t={totalOrders:e.length,pendingOrders:e.filter(e=>"pending"===e.status).length,completedOrders:e.filter(e=>"completed"===e.status).length,cancelledOrders:e.filter(e=>"cancelled"===e.status).length,totalRevenue:e.reduce((e,t)=>e+t.totalAmount,0),averageOrderValue:0};return t.averageOrderValue=t.totalOrders>0?t.totalRevenue/t.totalOrders:0,t}},P={all:["orders"],lists:()=>[...P.all,"list"],list:()=>[...P.lists()],details:()=>[...P.all,"detail"],detail:e=>[...P.details(),e],userOrders:e=>[...P.all,"user",e],stats:()=>[...P.all,"stats"]},U=()=>(0,k.I)({queryKey:P.list(),queryFn:I.getAllOrders,staleTime:12e4}),_=()=>(0,k.I)({queryKey:P.stats(),queryFn:I.getOrderStats,staleTime:3e5}),D=()=>{let{toast:e}=(0,S.dj)(),t=(0,A.jE)();return(0,T.n)({mutationFn:e=>I.updateOrderStatus(e),onSuccess:s=>{e({title:"Status Updated",description:"Order #".concat(s._id.slice(-6)," status changed to ").concat(s.status,".")}),t.invalidateQueries({queryKey:P.detail(s._id)}),t.invalidateQueries({queryKey:P.lists()}),t.invalidateQueries({queryKey:P.stats()})},onError:t=>{var s,a;console.error("Update order status error:",t),e({title:"Status Update Failed",description:(null===(a=t.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to update order status. Please try again.",variant:"destructive"})}})},F=()=>{let{toast:e}=(0,S.dj)(),t=(0,A.jE)();return(0,T.n)({mutationFn:e=>I.deleteOrder(e),onSuccess:(s,a)=>{e({title:"Order Deleted",description:"Order has been successfully deleted."}),t.removeQueries({queryKey:P.detail(a)}),t.invalidateQueries({queryKey:P.lists()}),t.invalidateQueries({queryKey:P.stats()})},onError:t=>{var s,a;console.error("Delete order error:",t),e({title:"Delete Failed",description:(null===(a=t.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to delete order. Please try again.",variant:"destructive"})}})};function z(e){let{status:t}=e;return(0,a.jsx)(y,{className:"".concat({completed:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",cancelled:"bg-red-100 text-red-800 border-red-200"}[t.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-200"," border"),children:t.charAt(0).toUpperCase()+t.slice(1)})}function L(e){let{label:t,value:s,color:r}=e;return(0,a.jsxs)("div",{className:"p-3 rounded-lg border ".concat({blue:"text-blue-600 bg-blue-50 border-blue-200",green:"text-green-600 bg-green-50 border-green-200",yellow:"text-yellow-600 bg-yellow-50 border-yellow-200",purple:"text-purple-600 bg-purple-50 border-purple-200"}[r]),children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:s}),(0,a.jsx)("p",{className:"text-xs",children:t})]})}function q(e){let{items:t}=e,s=e=>{if(!(null==e?void 0:e.length))return"/placeholder.svg?height=50&width=50";let t=e.find(e=>e.isMain);return(null==t?void 0:t.url)||e[0].url};return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex -space-x-2",children:null==t?void 0:t.slice(0,3).map((e,t)=>(null==e?void 0:e.product)?(0,a.jsx)(i.default,{src:s(e.product.images),alt:e.product.name||"Product",width:32,height:32,className:"rounded-full border-2 border-white object-cover"},t):(0,a.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"?"})},t))}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[null==t?void 0:t.length," item",(null==t?void 0:t.length)!==1?"s":""]})]})}function G(){var e;let{toast:t}=(0,S.dj)(),{data:s,isLoading:d,error:g}=U(),v=Array.isArray(s)?s:[],{data:k}=_(),A=D();F();let[T,M]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[P,G]=(0,r.useState)(null),[V,K]=(0,r.useState)(""),$=e=>{G(e),M(!0)},B=e=>{G(e),K(e.status),I(!0)},Q=async()=>{if(!P||!V||V===P.status){I(!1);return}try{await A.mutateAsync({orderId:P._id,status:V}),I(!1),G(null),K(""),t({title:"Success",description:"Order status updated successfully."})}catch(e){console.error("Status update failed:",e),t({title:"Error",description:"Failed to update order status.",variant:"destructive"})}},Z=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),H=e=>"$".concat(e.toLocaleString("en-US",{minimumFractionDigits:2}));return d?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("span",{className:"text-lg",children:"Loading orders..."})]})}):g?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:(0,a.jsxs)(n.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{className:"text-red-600",children:"Error Loading Orders"}),(0,a.jsx)(n.BT,{children:"Failed to load orders. Please check your connection and try again."})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(l.$,{onClick:()=>window.location.reload(),className:"w-full",children:"Retry"})})]})}):(0,a.jsxs)("div",{className:"flex min-h-screen flex-col items-center bg-gray-100 px-4 py-12",children:[(0,a.jsxs)(n.Zp,{className:"w-full max-w-7xl shadow-lg",children:[(0,a.jsxs)(n.aR,{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between pb-4 space-y-4 lg:space-y-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{className:"text-2xl font-bold tracking-wide",children:"Order Management"}),(0,a.jsxs)(n.BT,{children:["Manage customer orders and track order status. ",v.length," orders total."]})]}),k&&(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-center w-full lg:w-auto",children:[(0,a.jsx)(L,{label:"Total Orders",value:k.totalOrders,color:"blue"}),(0,a.jsx)(L,{label:"Pending",value:k.pendingOrders,color:"yellow"}),(0,a.jsx)(L,{label:"Completed",value:k.completedOrders,color:"green"}),(0,a.jsx)(L,{label:"Revenue",value:H(k.totalRevenue),color:"purple"})]})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"overflow-x-auto rounded-md border",children:(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{className:"bg-gray-50",children:(0,a.jsxs)(h,{children:[(0,a.jsx)(m,{children:"Order ID"}),(0,a.jsx)(m,{children:"Customer"}),(0,a.jsx)(m,{children:"Items"}),(0,a.jsx)(m,{children:"Order Date"}),(0,a.jsx)(m,{className:"text-right",children:"Total"}),(0,a.jsx)(m,{children:"Payment"}),(0,a.jsx)(m,{children:"Status"}),(0,a.jsx)(m,{className:"text-center",children:"Actions"})]})}),(0,a.jsx)(u,{children:v.map(e=>(0,a.jsxs)(h,{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)(p,{className:"font-medium",children:["#",e._id.slice(-6).toUpperCase()]}),(0,a.jsx)(p,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.user.username}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.user.email})]})}),(0,a.jsx)(p,{children:(0,a.jsx)(q,{items:e.orderItems})}),(0,a.jsx)(p,{children:Z(e.createdAt)}),(0,a.jsx)(p,{className:"text-right font-semibold",children:H(e.totalAmount)}),(0,a.jsx)(p,{children:(0,a.jsx)(y,{variant:"outline",className:"text-xs",children:e.paymentMethod})}),(0,a.jsx)(p,{children:(0,a.jsx)(z,{status:e.status})}),(0,a.jsxs)(p,{className:"flex justify-center space-x-2",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>$(e),className:"hover:bg-blue-100",children:(0,a.jsx)(j.A,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>B(e),className:"hover:bg-green-100",disabled:A.isPending,children:(0,a.jsx)(N,{className:"h-4 w-4 text-green-600"})})]})]},e._id))})]})}),0===v.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(w.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:"No orders found"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Orders will appear here once customers place them."})]})]})]}),(0,a.jsx)(x.lG,{open:T,onOpenChange:M,children:(0,a.jsxs)(x.ZJ,{children:[(0,a.jsx)(x.LC,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",style:{zIndex:9998}}),(0,a.jsxs)(x.Cf,{className:"fixed left-[50%] top-[50%] grid w-full max-w-4xl max-h-[90vh] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-2xl overflow-y-auto rounded-lg",style:{zIndex:9999},children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsxs)(x.L3,{className:"flex items-center space-x-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Order Details"})]}),(0,a.jsx)(x.rr,{children:"Complete order information and items"})]}),P&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Order Date"}),(0,a.jsx)("p",{className:"font-medium",children:Z(P.createdAt)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Customer"}),(0,a.jsx)("p",{className:"font-medium",children:P.user.username}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:P.user.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(R,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Payment"}),(0,a.jsx)("p",{className:"font-medium",children:P.paymentMethod}),(0,a.jsx)(z,{status:P.status})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Order Items"}),(0,a.jsx)("div",{className:"space-y-3",children:null===(e=P.orderItems)||void 0===e?void 0:e.map((e,t)=>{var s,r,n;return(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-3 border rounded-lg",children:[(null==e?void 0:e.product)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{src:(null===(r=e.product.images)||void 0===r?void 0:null===(s=r[0])||void 0===s?void 0:s.url)||"/placeholder.svg",alt:e.product.name||"Product",width:60,height:60,className:"rounded-md object-cover"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.product.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:(null===(n=e.product.category)||void 0===n?void 0:n.name)||"Unknown Category"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.product.description||"No description"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-15 h-15 bg-gray-200 rounded-md flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"No Image"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-red-500",children:"Product Not Found"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Unknown Category"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"This product may have been deleted"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-medium",children:["Qty: ",e.quantity]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[H(e.price)," each"]}),(0,a.jsx)("p",{className:"font-semibold",children:H(e.price*e.quantity)})]})]},t)})})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Total Amount:"}),(0,a.jsx)("span",{className:"text-xl font-bold text-green-600",children:H(P.totalAmount)})]}),P.shipment&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Shipment ID: ",P.shipment]})]})]}),(0,a.jsx)(x.Es,{children:(0,a.jsx)(l.$,{variant:"outline",onClick:()=>M(!1),children:"Close"})})]})]})}),(0,a.jsx)(x.lG,{open:E,onOpenChange:I,children:(0,a.jsxs)(x.Cf,{className:"max-w-md bg-white",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Update Order Status"}),(0,a.jsxs)(x.rr,{children:["Change the status of order #",null==P?void 0:P._id.slice(-6).toUpperCase()]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Current Status"}),(0,a.jsx)("p",{className:"text-lg font-semibold capitalize",children:null==P?void 0:P.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium block mb-2",children:"New Status"}),(0,a.jsxs)(f.l6,{value:V,onValueChange:K,children:[(0,a.jsx)(f.bq,{className:"w-full",children:(0,a.jsx)(f.yv,{placeholder:"Select new status"})}),(0,a.jsxs)(f.gC,{className:"bg-white",children:[(0,a.jsx)(f.eb,{value:"pending",children:"Pending"}),(0,a.jsx)(f.eb,{value:"completed",children:"Completed"}),(0,a.jsx)(f.eb,{value:"cancelled",children:"Cancelled"})]})]})]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(l.$,{variant:"outline",onClick:()=>I(!1),disabled:A.isPending,children:"Cancel"}),(0,a.jsx)(l.$,{onClick:Q,disabled:A.isPending||!V||V===(null==P?void 0:P.status),className:"bg-green-600 text-white hover:bg-green-700",children:A.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Status"})]})]})})]})}},7108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var a=s(5155),r=s(2115),i=s(9708),n=s(2085),l=s(3999);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:o=!1,...c}=e,u=o?i.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:r,size:n,className:s})),ref:t,...c})});o.displayName="Button"},7361:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});let a={products:{list:"/products",detail:e=>"/products/".concat(e),create:"/products",update:e=>"/products/".concat(e),delete:e=>"/products/".concat(e),updateImages:e=>"/products/".concat(e,"/images")},payments:{initialize:"/payments/initialize",verify:e=>"/payments/verify?reference=".concat(e)},auth:{login:"/users/login",register:"/users/register",admin:"/users/admin",users:"/users/users",deleteUser:e=>"/users/users/".concat(e),updateUserRole:e=>"/users/users/".concat(e,"/role")},categories:{list:"/categories",detail:e=>"/categories/".concat(e),create:"/categories",update:e=>"/categories/".concat(e),delete:e=>"/categories/".concat(e)},orders:{list:"/orders",detail:e=>"/orders/".concat(e),create:"/orders",update:e=>"/orders/".concat(e),delete:e=>"/orders/".concat(e),updateStatus:"/orders/status",userOrders:e=>"/orders/user/".concat(e)}}},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>l});var a=s(5155),r=s(2115),i=s(3999);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},9840:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>u,Es:()=>m,L3:()=>p,LC:()=>c,ZJ:()=>o,c7:()=>h,lG:()=>d,rr:()=>x});var a=s(5155),r=s(2115),i=s(5452),n=s(4416),l=s(3999);let d=i.bL;i.l9;let o=i.ZL;i.bm;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});c.displayName=i.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(i.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[r,(0,a.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.UC.displayName;let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};h.displayName="DialogHeader";let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};m.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});p.displayName=i.hE.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});x.displayName=i.VY.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[848,63,868,951,514,756,660,153,441,684,358],()=>t(1454)),_N_E=e.O()}]);