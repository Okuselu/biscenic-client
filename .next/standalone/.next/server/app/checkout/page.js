(()=>{var e={};e.id=279,e.ids=[279],e.modules={843:(e,t,s)=>{"use strict";s.d(t,{u:()=>r});let r=s(51060).A.create({baseURL:"https://biscenic-server-4.onrender.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>e,e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)))},1942:(e,t,s)=>{Promise.resolve().then(s.bind(s,19748))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7965:(e,t,s)=>{"use strict";s.d(t,{w:()=>d});var r=s(60687),i=s(43210),a=s(14163),n="horizontal",o=["horizontal","vertical"],l=i.forwardRef((e,t)=>{var s;let{decorative:i,orientation:l=n,...c}=e,d=(s=l,o.includes(s))?l:n;return(0,r.jsx)(a.sG.div,{"data-orientation":d,...i?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...c,ref:t})});l.displayName="Separator";var c=s(96241);let d=i.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...i},a)=>(0,r.jsx)(l,{ref:a,decorative:s,orientation:t,className:(0,c.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...i}));d.displayName=l.displayName},10403:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var r=s(60687),i=s(43210),a=s(14163),n=i.forwardRef((e,t)=>(0,r.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var o=s(24224),l=s(96241);let c=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n,{ref:s,className:(0,l.cn)(c(),e),...t}));d.displayName=n.displayName},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19748:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/checkout/checkoutClient.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/checkout/checkoutClient.tsx","default")},24934:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(60687),i=s(43210),a=s(8730),n=s(24224),o=s(96241);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef(({className:e,variant:t,size:s,asChild:i=!1,...n},c)=>{let d=i?a.DX:"button";return(0,r.jsx)(d,{className:(0,o.cn)(l({variant:t,size:s,className:e})),ref:c,...n})});c.displayName="Button"},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30474:(e,t,s)=>{"use strict";s.d(t,{default:()=>i.a});var r=s(31261),i=s.n(r)},31261:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return l},getImageProps:function(){return o}});let r=s(14985),i=s(44953),a=s(46533),n=r._(s(1933));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/biscenic-client/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let l=a.Image},33873:e=>{"use strict";e.exports=require("path")},48109:(e,t,s)=>{"use strict";s.d(t,{default:()=>P});var r=s(60687),i=s(43210),a=s(16189),n=s(30474),o=s(24934),l=s(68988),c=s(10403),d=s(55192),u=s(7965),p=s(85542),m=s(54050),h=s(51423),f=s(843),x=s(71995);let v={initializePayment:async e=>(await f.u.post(x.R.payments.initialize,e)).data.data,verifyPayment:async e=>(await f.u.get(x.R.payments.verify(e))).data.data},g={all:["payments"],verify:e=>[...g.all,"verify",e]},y=()=>(0,m.n)({mutationFn:e=>v.initializePayment(e),onSuccess:e=>{window.location.href=e.authorization_url},onError:e=>{console.error("Payment initialization failed:",e)}}),b=(e,t=!1)=>(0,h.I)({queryKey:g.verify(e),queryFn:()=>v.verifyPayment(e),enabled:!!e&&t,retry:3,retryDelay:1e3});var j=s(71702),N=s(85814),w=s.n(N);function P(){(0,a.useRouter)();let e=(0,a.useSearchParams)(),{cart:t,clearCart:s}=(0,p._)(),{toast:m}=(0,j.dj)(),[h,f]=(0,i.useState)({firstName:"",lastName:"",email:"",phone:""}),[x,v]=(0,i.useState)(!1),g=e.get("reference"),N=!!g,P=y(),{data:R,isLoading:C,error:k}=b(g||"",N),q=t.reduce((e,t)=>e+("string"==typeof t.price?parseFloat(t.price.replace(/[^0-9.-]+/g,"")):t.price)*t.quantity,0),M=.075*q,S=q+0+M,O=Math.round(100*S),_=(e,t)=>f(s=>({...s,[e]:t})),E=()=>{let{firstName:e,lastName:t,email:s,phone:r}=h;return e.trim()&&t.trim()&&s.trim()&&r.trim()?!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(m({title:"Invalid Email",description:"Enter a valid email.",variant:"destructive"}),!1):(m({title:"Missing Info",description:"Fill all fields.",variant:"destructive"}),!1)},z=async()=>{if(0===t.length)return m({title:"Empty Cart",description:"Add items first.",variant:"destructive"});if(E()){v(!0);try{await P.mutateAsync({email:h.email,amount:O})}catch(e){m({title:"Payment Error",description:"Try again.",variant:"destructive"})}finally{v(!1)}}};return N&&C?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Verifying Payment..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait."})]})}):0!==t.length||N?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-light tracking-wide",children:"Checkout"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Complete your order"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Shipping Information"}),(0,r.jsx)(d.BT,{children:"Enter your details for delivery"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"firstName",children:"First Name *"}),(0,r.jsx)(l.p,{id:"firstName",value:h.firstName,onChange:e=>_("firstName",e.target.value),className:"mt-1",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"lastName",children:"Last Name *"}),(0,r.jsx)(l.p,{id:"lastName",value:h.lastName,onChange:e=>_("lastName",e.target.value),className:"mt-1",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"email",children:"Email Address *"}),(0,r.jsx)(l.p,{id:"email",type:"email",value:h.email,onChange:e=>_("email",e.target.value),className:"mt-1",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"phone",children:"Phone Number *"}),(0,r.jsx)(l.p,{id:"phone",type:"tel",value:h.phone,onChange:e=>_("phone",e.target.value),placeholder:"+234...",className:"mt-1",required:!0})]})]})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Order Summary"}),(0,r.jsxs)(d.BT,{children:[t.length," item(s) in your cart"]})]}),(0,r.jsxs)(d.Wu,{children:[(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100",children:(0,r.jsx)(n.default,{src:e.image||"/placeholder.svg",alt:e.name,fill:!0,style:{objectFit:"cover"}})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Qty: ",e.quantity]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("p",{className:"font-medium",children:e.price})})]},e.id))}),(0,r.jsx)(u.w,{className:"my-6"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Subtotal"}),(0,r.jsxs)("span",{children:["â‚¦",q.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Shipping"}),(0,r.jsx)("span",{children:"Free"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"VAT (7.5%)"}),(0,r.jsxs)("span",{children:["â‚¦",M.toFixed(2)]})]}),(0,r.jsx)(u.w,{className:"my-2"}),(0,r.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{children:["â‚¦",S.toLocaleString()]})]})]}),(0,r.jsxs)(o.$,{className:"w-full mt-6 bg-[#7e8f6c] hover:bg-[#6d7a5c] text-white flex justify-center items-center",onClick:z,disabled:x||P.isPending,children:[x||P.isPending?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):null,x||P.isPending?"Processing...":`Pay â‚¦${S.toLocaleString()} with Paystack`]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Secure payment powered by Paystack. Your payment info is encrypted and secure."})]})]})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Your cart is empty"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Add items before checkout."}),(0,r.jsx)(o.$,{asChild:!0,children:(0,r.jsx)(w(),{href:"/shop",children:"Continue Shopping"})})]})})}},54050:(e,t,s)=>{"use strict";s.d(t,{n:()=>d});var r=s(43210),i=s(65406),a=s(33465),n=s(35536),o=s(31212),l=class extends n.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.EN)(t.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){let e=this.#s?.state??(0,i.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){a.jG.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},c=s(8693);function d(e,t){let s=(0,c.jE)(t),[i]=r.useState(()=>new l(s,e));r.useEffect(()=>{i.setOptions(e)},[i,e]);let n=r.useSyncExternalStore(r.useCallback(e=>i.subscribe(a.jG.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),d=r.useCallback((e,t)=>{i.mutate(e,t).catch(o.lQ)},[i]);if(n.error&&(0,o.GU)(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:d,mutateAsync:n.mutate}}},54647:()=>{},55192:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>o});var r=s(60687),i=s(43210),a=s(96241);let n=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let o=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},61528:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(37413),i=s(61120),a=s(19748);function n(){return(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,r.jsx)(a.default,{})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68988:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(60687),i=s(43210),a=s(96241);let n=i.forwardRef(({className:e,type:t,...s},i)=>(0,r.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...s}));n.displayName="Input"},71995:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});let r={products:{list:"/products",detail:e=>`/products/${e}`,create:"/products",update:e=>`/products/${e}`,delete:e=>`/products/${e}`,updateImages:e=>`/products/${e}/images`},payments:{initialize:"/payments/initialize",verify:e=>`/payments/verify?reference=${e}`},auth:{login:"/users/login",register:"/users/register",admin:"/users/admin",users:"/users/users",deleteUser:e=>`/users/users/${e}`,updateUserRole:e=>`/users/users/${e}/role`},categories:{list:"/categories",detail:e=>`/categories/${e}`,create:"/categories",update:e=>`/categories/${e}`,delete:e=>`/categories/${e}`},orders:{list:"/orders",detail:e=>`/orders/${e}`,create:"/orders",update:e=>`/orders/${e}`,delete:e=>`/orders/${e}`,updateStatus:"/orders/status",userOrders:e=>`/orders/user/${e}`}}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},92476:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(65239),i=s(48088),a=s(88170),n=s.n(a),o=s(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c={children:["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,61528)),"/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,62998)),"/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/checkout/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},94735:e=>{"use strict";e.exports=require("events")},97214:(e,t,s)=>{Promise.resolve().then(s.bind(s,48109))}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[719,481,533,62,872],()=>s(92476));module.exports=r})();