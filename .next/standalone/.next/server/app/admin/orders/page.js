(()=>{var e={};e.id=798,e.ids=[798],e.modules={843:(e,t,s)=>{"use strict";s.d(t,{u:()=>r});let r=s(51060).A.create({baseURL:"https://biscenic-server-4.onrender.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>e,e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11594:(e,t,s)=>{Promise.resolve().then(s.bind(s,71485))},12412:e=>{"use strict";e.exports=require("assert")},19080:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},51346:(e,t,s)=>{Promise.resolve().then(s.bind(s,74772))},54050:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});var r=s(43210),a=s(65406),i=s(33465),l=s(35536),n=s(31212),d=class extends l.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,n.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,n.EN)(t.mutationKey)!==(0,n.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,a.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.jG.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},c=s(8693);function o(e,t){let s=(0,c.jE)(t),[a]=r.useState(()=>new d(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);let l=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(i.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=r.useCallback((e,t)=>{a.mutate(e,t).catch(n.lQ)},[a]);if(l.error&&(0,n.GU)(a.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:o,mutateAsync:l.mutate}}},54647:()=>{},55192:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>n});var r=s(60687),a=s(43210),i=s(96241);let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card";let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(e,t,s)=>{"use strict";s.d(t,{bq:()=>m,eb:()=>g,gC:()=>h,l6:()=>o,yv:()=>u});var r=s(60687),a=s(43210),i=s(70143),l=s(78272),n=s(3589),d=s(13964),c=s(96241);let o=i.bL;i.YJ;let u=i.WT,m=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(i.l9,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,(0,r.jsx)(i.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=i.l9.displayName;let x=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));x.displayName=i.PP.displayName;let p=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}));p.displayName=i.wn.displayName;let h=a.forwardRef(({className:e,children:t,position:s="popper",...a},l)=>(0,r.jsx)(i.ZL,{children:(0,r.jsxs)(i.UC,{ref:l,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[(0,r.jsx)(x,{}),(0,r.jsx)(i.LM,{className:(0,c.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(p,{})]})}));h.displayName=i.UC.displayName,a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=i.JU.displayName;let g=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(i.q7,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(i.p4,{children:t})]}));g.displayName=i.q7.displayName,a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.wv.displayName},71485:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/admin/orders/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/admin/orders/page.tsx","default")},71995:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});let r={products:{list:"/products",detail:e=>`/products/${e}`,create:"/products",update:e=>`/products/${e}`,delete:e=>`/products/${e}`,updateImages:e=>`/products/${e}/images`},payments:{initialize:"/payments/initialize",verify:e=>`/payments/verify?reference=${e}`},auth:{login:"/users/login",register:"/users/register",admin:"/users/admin",users:"/users/users",deleteUser:e=>`/users/users/${e}`,updateUserRole:e=>`/users/users/${e}/role`},categories:{list:"/categories",detail:e=>`/categories/${e}`,create:"/categories",update:e=>`/categories/${e}`,delete:e=>`/categories/${e}`},orders:{list:"/orders",detail:e=>`/orders/${e}`,create:"/orders",update:e=>`/orders/${e}`,delete:e=>`/orders/${e}`,updateStatus:"/orders/status",userOrders:e=>`/orders/user/${e}`}}},74075:e=>{"use strict";e.exports=require("zlib")},74772:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var r=s(60687),a=s(43210),i=s(30474),l=s(55192),n=s(24934),d=s(96241);let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,d.cn)("w-full caption-bottom text-sm",e),...t})}));c.displayName="Table";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("thead",{ref:s,className:(0,d.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let u=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("tbody",{ref:s,className:(0,d.cn)("[&_tr:last-child]:border-0",e),...t}));u.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("tfoot",{ref:s,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let m=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("tr",{ref:s,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));m.displayName="TableRow";let x=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("th",{ref:s,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));x.displayName="TableHead";let p=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("td",{ref:s,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));p.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("caption",{ref:s,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";var h=s(27253),g=s(63974);let f=(0,s(24224).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function y({className:e,variant:t,...s}){return(0,r.jsx)("div",{className:(0,d.cn)(f({variant:t}),e),...s})}var j=s(62688);let b=(0,j.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var v=s(13861);let N=(0,j.A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var w=s(19080);let O=(0,j.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var C=s(58869);let R=(0,j.A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var k=s(71702),q=s(51423),A=s(8693),P=s(54050),M=s(843),S=s(71995);let U={getAllOrders:async()=>{let e=await M.u.get(S.R.orders.list);return e.data.data||e.data||[]},getOrderById:async e=>(await M.u.get(S.R.orders.detail(e))).data.data,getUserOrders:async e=>(await M.u.get(S.R.orders.userOrders(e))).data.data,createOrder:async e=>(await M.u.post(S.R.orders.create,e)).data.data,updateOrder:async(e,t)=>(await M.u.patch(S.R.orders.update(e),t)).data.data,updateOrderStatus:async e=>(await M.u.put(S.R.orders.updateStatus,e)).data.data,deleteOrder:async e=>{await M.u.delete(S.R.orders.delete(e))},getOrderStats:async()=>{let e=await U.getAllOrders(),t={totalOrders:e.length,pendingOrders:e.filter(e=>"pending"===e.status).length,completedOrders:e.filter(e=>"completed"===e.status).length,cancelledOrders:e.filter(e=>"cancelled"===e.status).length,totalRevenue:e.reduce((e,t)=>e+t.totalAmount,0),averageOrderValue:0};return t.averageOrderValue=t.totalOrders>0?t.totalRevenue/t.totalOrders:0,t}},T={all:["orders"],lists:()=>[...T.all,"list"],list:()=>[...T.lists()],details:()=>[...T.all,"detail"],detail:e=>[...T.details(),e],userOrders:e=>[...T.all,"user",e],stats:()=>[...T.all,"stats"]},$=()=>(0,q.I)({queryKey:T.list(),queryFn:U.getAllOrders,staleTime:12e4}),_=()=>(0,q.I)({queryKey:T.stats(),queryFn:U.getOrderStats,staleTime:3e5}),E=()=>{let{toast:e}=(0,k.dj)(),t=(0,A.jE)();return(0,P.n)({mutationFn:e=>U.updateOrderStatus(e),onSuccess:s=>{e({title:"Status Updated",description:`Order #${s._id.slice(-6)} status changed to ${s.status}.`}),t.invalidateQueries({queryKey:T.detail(s._id)}),t.invalidateQueries({queryKey:T.lists()}),t.invalidateQueries({queryKey:T.stats()})},onError:t=>{console.error("Update order status error:",t),e({title:"Status Update Failed",description:t.response?.data?.message||"Failed to update order status. Please try again.",variant:"destructive"})}})},F=()=>{let{toast:e}=(0,k.dj)(),t=(0,A.jE)();return(0,P.n)({mutationFn:e=>U.deleteOrder(e),onSuccess:(s,r)=>{e({title:"Order Deleted",description:"Order has been successfully deleted."}),t.removeQueries({queryKey:T.detail(r)}),t.invalidateQueries({queryKey:T.lists()}),t.invalidateQueries({queryKey:T.stats()})},onError:t=>{console.error("Delete order error:",t),e({title:"Delete Failed",description:t.response?.data?.message||"Failed to delete order. Please try again.",variant:"destructive"})}})};function D({status:e}){return(0,r.jsx)(y,{className:`${{completed:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",cancelled:"bg-red-100 text-red-800 border-red-200"}[e.toLowerCase()]||"bg-gray-100 text-gray-800 border-gray-200"} border`,children:e.charAt(0).toUpperCase()+e.slice(1)})}function I({label:e,value:t,color:s}){return(0,r.jsxs)("div",{className:`p-3 rounded-lg border ${{blue:"text-blue-600 bg-blue-50 border-blue-200",green:"text-green-600 bg-green-50 border-green-200",yellow:"text-yellow-600 bg-yellow-50 border-yellow-200",purple:"text-purple-600 bg-purple-50 border-purple-200"}[s]}`,children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:t}),(0,r.jsx)("p",{className:"text-xs",children:e})]})}function z({items:e}){let t=e=>{if(!e?.length)return"/placeholder.svg?height=50&width=50";let t=e.find(e=>e.isMain);return t?.url||e[0].url};return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"flex -space-x-2",children:e?.slice(0,3).map((e,s)=>e?.product?r.jsx(i.default,{src:t(e.product.images),alt:e.product.name||"Product",width:32,height:32,className:"rounded-full border-2 border-white object-cover"},s):r.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center",children:r.jsx("span",{className:"text-xs text-gray-500",children:"?"})},s))}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e?.length," item",e?.length!==1?"s":""]})]})}function L(){let{toast:e}=(0,k.dj)(),{data:t,isLoading:s,error:d}=$(),f=Array.isArray(t)?t:[],{data:j}=_(),q=E();F();let[A,P]=(0,a.useState)(!1),[M,S]=(0,a.useState)(!1),[U,T]=(0,a.useState)(null),[L,B]=(0,a.useState)(""),K=e=>{T(e),P(!0)},G=e=>{T(e),B(e.status),S(!0)},Q=async()=>{if(!U||!L||L===U.status){S(!1);return}try{await q.mutateAsync({orderId:U._id,status:L}),S(!1),T(null),B(""),e({title:"Success",description:"Order status updated successfully."})}catch(t){console.error("Status update failed:",t),e({title:"Error",description:"Failed to update order status.",variant:"destructive"})}},V=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Z=e=>`$${e.toLocaleString("en-US",{minimumFractionDigits:2})}`;return s?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(b,{className:"h-8 w-8 animate-spin"}),(0,r.jsx)("span",{className:"text-lg",children:"Loading orders..."})]})}):d?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:(0,r.jsxs)(l.Zp,{className:"w-full max-w-md",children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{className:"text-red-600",children:"Error Loading Orders"}),(0,r.jsx)(l.BT,{children:"Failed to load orders. Please check your connection and try again."})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)(n.$,{onClick:()=>window.location.reload(),className:"w-full",children:"Retry"})})]})}):(0,r.jsxs)("div",{className:"flex min-h-screen flex-col items-center bg-gray-100 px-4 py-12",children:[(0,r.jsxs)(l.Zp,{className:"w-full max-w-7xl shadow-lg",children:[(0,r.jsxs)(l.aR,{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between pb-4 space-y-4 lg:space-y-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ZB,{className:"text-2xl font-bold tracking-wide",children:"Order Management"}),(0,r.jsxs)(l.BT,{children:["Manage customer orders and track order status. ",f.length," orders total."]})]}),j&&(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-center w-full lg:w-auto",children:[(0,r.jsx)(I,{label:"Total Orders",value:j.totalOrders,color:"blue"}),(0,r.jsx)(I,{label:"Pending",value:j.pendingOrders,color:"yellow"}),(0,r.jsx)(I,{label:"Completed",value:j.completedOrders,color:"green"}),(0,r.jsx)(I,{label:"Revenue",value:Z(j.totalRevenue),color:"purple"})]})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsx)("div",{className:"overflow-x-auto rounded-md border",children:(0,r.jsxs)(c,{children:[(0,r.jsx)(o,{className:"bg-gray-50",children:(0,r.jsxs)(m,{children:[(0,r.jsx)(x,{children:"Order ID"}),(0,r.jsx)(x,{children:"Customer"}),(0,r.jsx)(x,{children:"Items"}),(0,r.jsx)(x,{children:"Order Date"}),(0,r.jsx)(x,{className:"text-right",children:"Total"}),(0,r.jsx)(x,{children:"Payment"}),(0,r.jsx)(x,{children:"Status"}),(0,r.jsx)(x,{className:"text-center",children:"Actions"})]})}),(0,r.jsx)(u,{children:f.map(e=>(0,r.jsxs)(m,{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)(p,{className:"font-medium",children:["#",e._id.slice(-6).toUpperCase()]}),(0,r.jsx)(p,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.user.username}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.user.email})]})}),(0,r.jsx)(p,{children:(0,r.jsx)(z,{items:e.orderItems})}),(0,r.jsx)(p,{children:V(e.createdAt)}),(0,r.jsx)(p,{className:"text-right font-semibold",children:Z(e.totalAmount)}),(0,r.jsx)(p,{children:(0,r.jsx)(y,{variant:"outline",className:"text-xs",children:e.paymentMethod})}),(0,r.jsx)(p,{children:(0,r.jsx)(D,{status:e.status})}),(0,r.jsxs)(p,{className:"flex justify-center space-x-2",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>K(e),className:"hover:bg-blue-100",children:(0,r.jsx)(v.A,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>G(e),className:"hover:bg-green-100",disabled:q.isPending,children:(0,r.jsx)(N,{className:"h-4 w-4 text-green-600"})})]})]},e._id))})]})}),0===f.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(w.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:"No orders found"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Orders will appear here once customers place them."})]})]})]}),(0,r.jsx)(h.lG,{open:A,onOpenChange:P,children:(0,r.jsxs)(h.ZJ,{children:[(0,r.jsx)(h.LC,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",style:{zIndex:9998}}),(0,r.jsxs)(h.Cf,{className:"fixed left-[50%] top-[50%] grid w-full max-w-4xl max-h-[90vh] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-2xl overflow-y-auto rounded-lg",style:{zIndex:9999},children:[(0,r.jsxs)(h.c7,{children:[(0,r.jsxs)(h.L3,{className:"flex items-center space-x-2",children:[(0,r.jsx)(w.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Order Details"})]}),(0,r.jsx)(h.rr,{children:"Complete order information and items"})]}),U&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(O,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Order Date"}),(0,r.jsx)("p",{className:"font-medium",children:V(U.createdAt)})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(C.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Customer"}),(0,r.jsx)("p",{className:"font-medium",children:U.user.username}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:U.user.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(R,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Payment"}),(0,r.jsx)("p",{className:"font-medium",children:U.paymentMethod}),(0,r.jsx)(D,{status:U.status})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Order Items"}),(0,r.jsx)("div",{className:"space-y-3",children:U.orderItems?.map((e,t)=>r.jsxs("div",{className:"flex items-center space-x-4 p-3 border rounded-lg",children:[e?.product?r.jsxs(r.Fragment,{children:[r.jsx(i.default,{src:e.product.images?.[0]?.url||"/placeholder.svg",alt:e.product.name||"Product",width:60,height:60,className:"rounded-md object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium",children:e.product.name}),r.jsx("p",{className:"text-sm text-gray-600",children:e.product.category?.name||"Unknown Category"}),r.jsx("p",{className:"text-xs text-gray-500",children:e.product.description||"No description"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-15 h-15 bg-gray-200 rounded-md flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500 text-sm",children:"No Image"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-red-500",children:"Product Not Found"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Unknown Category"}),r.jsx("p",{className:"text-xs text-gray-500",children:"This product may have been deleted"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-medium",children:["Qty: ",e.quantity]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[Z(e.price)," each"]}),r.jsx("p",{className:"font-semibold",children:Z(e.price*e.quantity)})]})]},t))})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-lg font-semibold",children:"Total Amount:"}),(0,r.jsx)("span",{className:"text-xl font-bold text-green-600",children:Z(U.totalAmount)})]}),U.shipment&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Shipment ID: ",U.shipment]})]})]}),(0,r.jsx)(h.Es,{children:(0,r.jsx)(n.$,{variant:"outline",onClick:()=>P(!1),children:"Close"})})]})]})}),(0,r.jsx)(h.lG,{open:M,onOpenChange:S,children:(0,r.jsxs)(h.Cf,{className:"max-w-md bg-white",children:[(0,r.jsxs)(h.c7,{children:[(0,r.jsx)(h.L3,{children:"Update Order Status"}),(0,r.jsxs)(h.rr,{children:["Change the status of order #",U?._id.slice(-6).toUpperCase()]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Current Status"}),(0,r.jsx)("p",{className:"text-lg font-semibold capitalize",children:U?.status})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium block mb-2",children:"New Status"}),(0,r.jsxs)(g.l6,{value:L,onValueChange:B,children:[(0,r.jsx)(g.bq,{className:"w-full",children:(0,r.jsx)(g.yv,{placeholder:"Select new status"})}),(0,r.jsxs)(g.gC,{className:"bg-white",children:[(0,r.jsx)(g.eb,{value:"pending",children:"Pending"}),(0,r.jsx)(g.eb,{value:"completed",children:"Completed"}),(0,r.jsx)(g.eb,{value:"cancelled",children:"Cancelled"})]})]})]})]}),(0,r.jsxs)(h.Es,{children:[(0,r.jsx)(n.$,{variant:"outline",onClick:()=>S(!1),disabled:q.isPending,children:"Cancel"}),(0,r.jsx)(n.$,{onClick:Q,disabled:q.isPending||!L||L===U?.status,className:"bg-green-600 text-white hover:bg-green-700",children:q.isPending?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Status"})]})]})})]})}},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91892:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=s(65239),a=s(48088),i=s(88170),l=s.n(i),n=s(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c={children:["",{children:["admin",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,71485)),"/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/admin/orders/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,62998)),"/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Users/mac/Documents/Brave2/Term3/capstone/biscenic-project/biscenic-client/app/admin/orders/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/orders/page",pathname:"/admin/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[719,481,533,62,964,399,872,809],()=>s(91892));module.exports=r})();